<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merge Sort Stuff</title>
</head>
<body>
    <script>

        function mergeSort(array) {


            //with -1 on the array stuff
            function mergeAlgo(A, B, m, n) { //m = A.length, n = B.length
                let i = j = 0;
                let C = []; //empty array
                console.log("Array A is: " + A);
                console.log("Array B is: " + B);
                while (i < m && j < n) {
                    console.log("another WHILE Loop going on");
                    if (A[i] < B[j]) {
                        console.log("the IF fired here");
                        console.log("A[i] is: " + A[i]);
                        console.log("B[j] is: " + B[j]);

                        C.push(A[i]);
                        i++;
                        //C[k++] = A[i++];
                    } else {
                        console.log("the ELSE fired here");
                        console.log("A[i] is: " + A[i]);
                        console.log("B[j] is: " + B[j]);
                        
                        C.push(B[j]);
                        j++;
                        //C[k++] = B[j++];
                    }
                }
                console.log("m is: " + m);
                console.log("n is: " + n);
                console.log("i is: " + i);
                console.log("j is: " + j);
                
                for (; i < m; i++) {
                    console.log("an extra push happened for array A");
                    C.push(A[i]);
                    //C[k++] = A[i]; 
                };
                for (; j < n; j++) {
                    console.log("an extra push happened for array B");
                    C.push(B[j]);
                    //C[k++] = B[j]; 
                };
                /* for (;i < m; i++) {
                    C.push(A[i]);
                    //C[k++] = A[i]; 
                };
                for (;j < n; n++) {
                    C.push(B[j]);
                    //C[k++] = B[j]; 
                }; */
                console.log("C is: " + C);
                return C;
            }

            /* function mergeAlgo(A, B, m, n) { //m = A.length, n = B.length
                let i = j = 1;
                let C = []; //empty array
                while (i <= m && j <= n) {
                    console.log("another WHILE Loop going on");
                    if (A[i] < B[j]) {
                        console.log("the IF fired here");
                        console.log("A[i] is: " + A[i]);
                        console.log("B[j] is: " + B[j]);

                        C.push(A[i++]);
                        //C[k++] = A[i++];
                    } else {
                        console.log("the ELSE fired here");
                        console.log("A[i] is: " + A[i]);
                        console.log("B[j] is: " + B[j]);
                        
                        C.push(B[j++]);
                        //C[k++] = B[j++];
                    }
                }
                console.log("m is: " + m);
                console.log("n is: " + n);
                console.log("i is: " + i);
                console.log("j is: " + j);
                let x = i;
                let y = j;
                for (let i; i <= m; i++) {
                    console.log("an extra push happened for array A");
                    C.push(A[i]);
                    //C[k++] = A[i]; 
                };
                for (let j; j <= n; j++) {
                    console.log("an extra push happened for array B");
                    C.push(B[j]);
                    //C[k++] = B[j]; 
                };
                for (;i < m; i++) {
                    C.push(A[i]);
                    //C[k++] = A[i]; 
                };
                for (;j < n; n++) {
                    C.push(B[j]);
                    //C[k++] = B[j]; 
                }; 
                console.log("C is: " + C);
                return C;
            } */

            if (array.length === 1) {
                return array;
            } else {

                //this whole part needs to
                // #1 separate an array into halves
                // #2 
                // #3 weave them together

                // #1
                console.log("starting another iteration");
                let length = array.length; //ex: 5 [0,1,2,3,4]
                let start = mid1 = 0;
                let halfway = length/2; //5 div 2 == 2.5
                //console.log("halfway is: " + halfway);
                if (!Number.isInteger(halfway)) {
                    mid1 = Math.floor(halfway); //2; round down to split odd numbered arrays
                } else {
                    mid1 = halfway;
                }
                let end = length; //5
                //console.log("end is: " + end);
                let firstHalf = array.slice(start, mid1);
                let secondHalf = array.slice(mid1, end);
                
                console.log("firstHalf: " + firstHalf);
                console.log("secondHalf: " + secondHalf);
                //splits original array in halves, UNSORTED

                // #2 
                // sort each array
                let sortedFirstHalf = mergeSort(firstHalf);
                let sortedSecondHalf = mergeSort(secondHalf);

                // #3
                // Two sorted, now merge

                let holderArray = mergeAlgo(sortedFirstHalf, sortedSecondHalf, sortedFirstHalf.length, sortedSecondHalf.length);
                //return mergeSort();//doing this will cause SOF - array length will NOT change and base case won't be reached

                return holderArray;
            }
        }


    const testArray = [3,1,2,9,33,13,5] 
    mergeSort(testArray);
    console.log(testArray);
    </script>
</body>
</html>